---
title: "DM"
---

# L'organisation

## Date de rendu

J'attends le rendu le **vendredi 22/12/2023 max**. Envoyez le moi sur *monpr√©nom.monnom*@ens-lyon.fr. Il y aura -2 points par semaine de retard (2 jours de retard= -2 points, 10 jours de retard= -4 points)!

## Groupes

Vous pouvez me fournir **un rendu par groupe** (les groupes que vous avez d√©fini pendant le cours rassemblant des GeoNum et des Sentinelles...). Vous pouvez acc√©der au Discord GeoSentiNum n'importe quand pour travailler sur le DM.

J'attends que chacun investisse sur ce devoir **10h** de son temps. Au-del√† de cela, vous pouvez vous organiser comme vous le souhaitez.

Indiquez (en quelques lignes) comment vous avez **r√©parti les t√¢ches** et de quelle mani√®re vous avez investi tel ou tel aspect Indiquez √©galement si vous souhaitez avoir une **note commune** pour ce travail ou **une note individuelle**

Il faudra donc a minima que vous atteigniez un consensus sur cette partie "qui a fait quoi", et s'il y en a ne serait-ce qu'un seul qui souhaite la notation individualis√©e dans le groupe alors c'est son avis qui pr√©vaudra! (Oui c'est un peu compliqu√©: l'id√©e, comme vous l'aurez sans doute compris, c'est que personne ne se laisse passivement porter par les autres dans les groupes...)

## Format du rendu

J'attends que vous me fournissiez √† la fois:

-   le **document comportant les codes utilis√©s** (par exemple, un projet Quarto .qmd). Ce document me permettra de voir l'int√©gralit√© des lignes de commande que vous aurez √©crites.
-   un rendu de type **rapport** (par exemple le fichier .doc, .html, ou .pdf selon vos pr√©f√©rences que vous aurez tricot√© √† partir du document .qmd).

De ce fait, vous pouvez, si vous le souhaitez, ne pas me montrer les lignes de commandes dans le rapport pour faire "comme si" j'√©tais un interlocuteur qui ne conna√Æt pas le langage et s'int√©resse juste aux r√©sultats...

Si vous me montrez des tableaux de donn√©es interm√©diaires, essayez de me montrer seulement quelques lignes, ou leurs dimensions, pas des tableaux √©normes qui vont g√©n√©rer 10 pages de rapport pour pas grand chose...

# Le sujet

**Analysez les donn√©es** d√©taill√©es ci-apr√®s, portant sur les **h√¥pitaux dans le monde** (coordonn√©es X-Y, pays) et des **donn√©es g√©n√©rales sur les pays** (population, esp√©rance de vie, indice de d√©veloppement humain).

Vous pouvez d√©finir vous-m√™mes les questions auxquelles vous souhaitez r√©pondre, les m√©thodes mises en oeuvre (bon, en R quand-m√™me), les graphiques et cartes que vous souhaitez produire. Vous √™tes libres de chercher des donn√©es compl√©mentaires si vous le souhaitez (et que les 10h imparties vous en laissent le temps).

Au-del√† des **donn√©es de d√©part que je fixe**, le sujet est donc tr√®s **libre**... Emparez-vous en, et surprenez-moi üôÇ.

# Quelques pistes

## Production

Le but de ce DM est que vous soyiez en mesure de produire quelque chose avec R, √† partir de donn√©es. Il va donc donc vous falloir *produire* un r√©sultat que je puisse √©valuer (par exemple un rapport Quarto...). 

‚úÖ Installer R, RStudio

‚úÖ Ex√©cuter du code R 

‚úÖ Ecrire et tricoter un rapport

## Combinaison de sources de donn√©es

Vous disposez de 2 jeux de donn√©es, qui ont en commun l'information correspondant au pays. Peut-√™tre souhaiterez-vous r√©aliser une **jointure** sur ces deux jeux de donn√©es pour pouvoir croiser les informations qu'ils contiennent?

Voir par exemple la fonction `dplyr::left_join()` (un article sur les combinaisons et jointures de tables [ici](https://perso.ens-lyon.fr/lise.vaudor/combinaisons-et-jointures-de-tables-avec-dplyr/))

‚úÖ R√©aliser une jointure de tableaux

‚úÖ Croiser des sources de donn√©es diverses

## Cartographie

Les jeux de donn√©es comportent des **coordonn√©es g√©ographiques** (points). Peut-√™tre pourriez-vous produire des cartes?

‚úÖ Lire un jeu de donn√©es g√©ographiques (sf...)

‚úÖ Produire une carte

‚úÖ Customiser une carte

## Graphiques

Au-del√† de graphiques tr√®s simples d√©crivant les donn√©es (nombres d'h√¥pitaux par pays par exemple), vous pouvez tenter de **croiser graphiquement des informations** (nombre d'h√¥pitaux par pays vs esp√©rance de vie dans ce pays, peut-√™tre en prenant en compte la population ou l'aire du pays...).

‚úÖ R√©sumer, croiser des donn√©es (manipulation de tableaux)

‚úÖ R√©aliser une repr√©sentation graphique adapt√©e

## Angle d'analyse

J'aimerais que vous me montriez que vous √™tes capables de r√©aliser des choses avec R, mais aussi, id√©alement, j'aimerais que ces choses aient un **sens**. Est-ce que ce que vous avez produit r√©pond √† une **question**? Si c'est le cas cela vous aidera √† avoir des id√©es de choses √† faire, au-del√† de la simple "d√©monstration technique"...

‚úÖ Imaginer une question (th√©matique) √† laquelle les jeux de donn√©es pourraient r√©pondre

‚úÖ Produire les √©l√©ments d'analyse permettant de r√©pondre √† cette question

## Cr√©ativit√©

Vous pouvez faire le choix de poser une question qui tombe sous le sens ou un peu originale, de n'utiliser qu'une partie des donn√©es, ou au contraire de les compl√©ter par d'autres jeux de donn√©es que vous avez identifi√©s/t√©l√©charg√©s par ailleurs.

# Les donn√©es

Je r√©cup√®re les deux tables de donn√©es initiales √† partir d'une requ√™te √† **Wikidata** (formul√©e √† l'aide du package [glitter](https://github.com/lvaudor/glitter)).


Ces jeux de donn√©es sont t√©l√©chargeables √† l'adresse suivante: <https://perso.ens-lyon.fr/lise.vaudor/datasets/data_DM_GeoSentiNum.zip>.


Vous n'avez **pas besoin d'ex√©cuter le code suivant**, je vous fournis d√©j√† la sortie dans le zip. Je le mets ici pour que vous puissiez (si vous avez envie) enrichir votre jeu de donn√©es ou le compl√©ter par d'autres donn√©es Wikidata -ou autre SPARQL endpoint-). Dans ce cas il vous faudra installer glitter depuis [son repo github](https://github.com/lvaudor/glitter) (instructions d'installation en bas du README).

Vous pouvez consulter la **documentation de Wikidata** pour mieux comprendre la nature des donn√©es, notamment les fiches relatives aux h√¥pitaux (par exemple [ici](https://www.wikidata.org/wiki/Q19185932)) ou aux pays (par exemple [ici](https://www.wikidata.org/wiki/Q142)).

Le premier jeu de donn√©es comprend plus de 22 000 enregistrements d'h√¥pitaux:

```{r hopitaux, eval=FALSE}
library(glitter)
hopitaux=spq_init() %>% 
  spq_add("?hopital wdt:P31 wd:Q16917") %>% 
  spq_add("?hopital wdt:P625 ?coords") %>%
  spq_add("?hopital wdt:P17 ?pays") %>% 
  spq_label(hopital,pays) %>% 
  spq_perform()%>% 
  dplyr::filter(stringr::str_detect(coords,"Point")) %>% 
  sf::st_as_sf(wkt="coords")

sf::st_write(hopitaux,"data/hopitaux.shp")
```

Le deuxi√®me jeu de donn√©es procure quelques descripteurs des pays:

```{r, eval=FALSE}
pays=spq_init() %>% 
  spq_add("?pays wdt:P31 wd:Q6256") %>% 
  spq_label(pays) %>% 
  spq_add("?pays wdt:P1082 ?population", .required=FALSE) %>% 
  spq_add("?pays wdt:P2046 ?area", .required=FALSE) %>% 
  spq_add("?pays wdt:P625 ?coords") %>%
  spq_add("?pays wdt:P1081 ?human_dev_index", .required=FALSE) %>% 
  spq_add("?pays wdt:P2250 ?life_expectancy", .required=FALSE) %>%
  spq_add("?pays wdt:P297 ?iso2", .required=FALSE) %>% 
  spq_add("?pays wdt:P298 ?iso3", .required=FALSE) %>% 
  spq_perform() %>% 
  sf::st_as_sf(wkt="coords")

sf::st_write(pays,"data/pays.shp")
```
